<html>
<head>
    <title>Letter Changes in JS</title>
</head>
<body>


    <p>Using the JavaScript language, have the function LetterChanges(str) take the str parameter being
    passed and modify it using the following algorithm. </p>

    <p>Replace every letter in the string with the letter
    following it in the alphabet (ie. c becomes d, z becomes a). Then capitalize every vowel in this new
    string (a, e, i, o, u) and finally return this modified string. </p>


<script type="text/javascript">
    
    var alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];

    var vowels = ['a', 'e', 'i', 'o', 'u'];
    
    function LetterChanges(string) { 

        // var location;
        var modifiedWords = [];
        var modifiedString;

        // Strip out special characters
        string = string.replace(/[^a-zA-Z0-9]/g,' ');
        string = string.toLowerCase().trim();

        // break string into words
        words = string.split(" ");

        // shift letters for each word
        words.forEach(function(word, index){

            // break word into letters
            var letterArray = word.split("");

            // This is so ugly, forgive me.  I will refactor into separate functions, I swear it!
            letterArray.forEach(function(letter, index) {

                // find current letter position in alphabet array
                // console.log(letter +  " is at position " + alphabet.indexOf(letter) + " in the alphabet.");
            
                // assign new letter by incrementing position plus one
                if (alphabet.indexOf(letter) <= 24) {
                    letterArray[index] = alphabet[alphabet.indexOf(letter) + 1];
                } else {
                    // Account for Z the only way I know how.
                    letterArray[index] = alphabet[0];
                };

                // capitalize any vowels
                if (vowels.indexOf(letterArray[index]) >= 0) {
                    letterArray[index] = letterArray[index].toUpperCase();
                };

            }); // end letter callback function loop.

            // overwrite existing word in array with index to use new word
            words[index] = letterArray.join("");

        }); // end word callback function loop.

        // reassemble modified words into string
        modifiedString = words.join(" ") + ".";

        // return modified string
        return modifiedString;
             
    }

console.log(LetterChanges("The quick brown fox jumped over the lazy dog."));

</script>

</body>
</html>